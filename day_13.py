input = '''#.#.####.#.#.##
.#.##..##.#...#
.#..#..#..#.#..
.##..##..##.#.#
....####.......
##...##...##..#
##...##...##..#
....####.......
.##..##..##.#.#
.#..#..#..#.#..
.#.##..##.#...#
#.#.####.#.#.#.
..#.#..#.#....#
##.#.##.#.####.
..#..##..#....#
#..#.##.#..#.##
#.#.####.#.#...

..#.....##.
.#..#..##.#
.......###.
####.##.#.#
###.###....
###.###....
####.##.#.#
.......####
.#..#..##.#
..#.....##.
..#.....##.
.#..#..##.#
.......####

##.#.##...####.
#####..#...##..
##.##.#.#####.#
.##.#..##..##..
###..#.#####.#.
###..#.#####.#.
.##.#..##..##..
##.##.#.#####.#
#####..#...##..
##.#.##..#####.
...#...#....###
##.#.###.###..#
..#.###.#.#....
####...#.#.#...
.#..#....##.#.#
....####.###.##
....####.###.##

...#.###.######
..##.##.##.##.#
####.#....#..#.
.#...#.#.#.##.#
.#..#.#.#######
##..#.#.#######
.#...#.#.#.##.#

..##..##...
..#.##.#.##
...#.#.#...
##.#.####..
...###.#.##
######.#.##
######..#.#

.#..###.#
.###.##.#
....###.#
.######..
...#.#.#.
...#.#.#.
.######..
....###.#
.###.##.#
.#..###.#
####...##
..##.#..#
..##....#
####...##
.#..###.#

##..#######
.#..#.#..#.
##..#######
.####..##..
#....#.##.#
..##.#.##.#
#....######

##.###.#...##
######..##.##
######..##.##
##.###.#...##
.##.####...#.
####.##.#.#..
##..###...###
#......#.#...
#...###.##.##
.#####...##..
.##..###.....
.##.......#..
#.######.##..

...#..........#..
###.###....###.##
##.###.####.###.#
..###.#.##.#.###.
...##.#.##.#.##..
#####........####
..#.#.##..##.#.#.
..#####.##.#####.
...#...####...#..
##..##..##..##..#
....#.##..##.#...
..#.####..####.#.
...##.##..##.##..
..##..........##.
.....#..##..#..#.
###.#........#.##
..#...#.##.#...#.

....####...
.##..##.###
.##..##.###
....####...
..#..#.....
####.#.###.
.###.###.##
...##...#..
#...####.##
..#.#######
##..####.##

..#######.#
##.#.###...
##.....##.#
#.#.###...#
...#..##.#.
...#..##.#.
#.#.###...#
##.....#..#
##.#.###...
..#######.#
#.##..#.#.#
#.##.##..##
#.##.##..##
#.##..#.#.#
..#######.#
##.#.###...
##.....#..#

..#...#..#...#..#
########...##.##.
.#..#.#.#.#.#####
..##...##..##....
.......##########
.#..#.##.#.#..##.
########...###..#
..##...###.##....
#....#..#.#......
##..###..#.......
##..##.##.##..##.

####...##
......##.
.##.#.#..
.......#.
.##.###..
.##.##.#.
#..##.##.
....#.#..
...#..#..
.##..#...
.##.###..
#..##..#.
#..##..#.

##.#...
.###...
###...#
##.###.
...#...
...#.#.
###.###
....#.#
....#.#

..#.#.#.......#
..#.#.#.......#
.#.#.#.#####.##
.##..###.#.####
#.######.#.#.#.
#####.####.#.##
#####.####.#.##
#.######.#.#.#.
.##..###.#.#.##

..#..#.##.#
..#..#.##.#
...#.#.#.##
.#...#.....
##...##....
..#.#..#.#.
..#..#.#...
...#####...
...##.#..#.

.##.######...
.....####.#..
#..##.#..#.##
.##.###.#.###
#..#.####..##
....#..#.#...
####....#....
####..##.....
.##.#....####
###.###...#..
.##......#...
.##..#..##.##
#..#..#.###..
.....###..###
....#....#.##
.##..########
.##..#.###...

.#.####.#.##...##
..#.##.#......#.#
..#.##.#......#.#
.#.####.#.##...##
##..##..#...#..#.
#...##...##.###..
##......##.#...#.

#....##.#....##
#....#...#.#...
..##..#.#.#####
.#.##.#####.###
.#.##.#####.###
..##..#.#..####
#....#...#.#...
#....##.#....##
.###.##.#...#..
.#..###...#..##
#...#..###.#...
..###.##.##..##
#...##....#.#..

.##...#.....###
#..###.#..#####
#..#......###..
.##.#####.##...
.##.#.##.#.####
.....#.##.##...
#######.####.##
.......#.####..
####..#..#.....
####...##.#....
#.##.....##.#..
....#####...#..
....#.#.###....
.##.#####.#####
.......##.#.###
#..#####.....##
#####.##.....##

....#.##.
##..#....
##...##.#
##......#
..#.#.##.
..#...###
......###
..#.#.##.
##......#
##...##.#
##..#....
....#.##.
####.....

.#..##.
#.#.###
#..#...
#...##.
####..#
#..#.##
#..#.##
####..#
....##.
#..#...
#.#.###
.#..##.
##..###
##..###
.#..##.
#.#.###
#..#...

#..##..#....####.
..####..#.....##.
.#.##.#.####...##
.#....#...#...###
........#...####.
.##...#.##.##..##
#..##..##...#....
..#..#...##..#...
#..##..#...#####.
.##..##.###..#.#.
.##..##.###..#.#.
#..##..#...#####.
..#..#...##..#...

#....##.####.##
#...##.######.#
.##.#.##.##.##.
..##...#....#..
#..#..#........
#.#..#.######.#
#.##..#.####.#.
###.#.##.##.##.
#..#.#........#
#..#.#........#
###.#.##.##.##.
#.##..#.####.#.
#.#..#.######.#

###.....###.##.
.....##.#.#..#.
.....##.#.#..#.
###....####.##.
...#...#..##.#.
..##.#...#....#
####.##.#..#...
######.##.#.###
######.#...#.#.
...#.#.####.###
###..##...#..##

.###.#..####..#.#
.#...#.##########
#...###..##..#.#.
#...###..##..#.#.
.#...#.##########
.###.#..####..#.#
..###...#..###..#
..###...#..####.#
.###.#..####..#.#
.#...#.##########
#...###..##..#.#.

##..##..#
...#..#..
#.##..##.
.#..##..#
##..##..#
.#..##..#
#.##..##.
.#..##..#
..##..##.

..#.##....#..
#.#....#.#...
....##.......
..######.....
.########.#..
#..#..#..####
##......##...
#..#..#..##..
..######..#..
.##.##.##..##
..######.....
...#..#...#..
##..##..##...

....#..##..#.....
.#.#.#....#.#.#..
.#.....##.....#..
...######.###....
....#.#..#.#.....
#.##..####..##.##
..#..........#...
##....#..#....###
.....#.##.#......
###...#..#...####
##.#.#.##.#.#.###
.##.########.##..
..#....##....#...

#..##..#.#.##..
.#.##.#..##.###
###..####.#.###
.#.##.#......#.
.#.##.#......#.
###..####.#.#.#
.#.##.#..##.###
#..##..#.#.##..
##.##.##.##..#.

....#..##...###
......###.#.###
.##.###....#.##
....###.#..#.#.
....#.#.#.##.#.
#..##.#..#.##..
#..##.#..#..#..

###.###..#.##..
..####..###....
..#..#..##.....
##.....#.....##
###......##...#
..#...#.##.###.
..#.....###..#.
..#.....###..#.
..#...#.##.###.
###......##...#
##.....#.....##
..#..#..#......
..####..###....
###.###..#.##..
#####..........

...#..#....
#...##...##
##..##..###
###.##.####
...#..#...#
...#..#...#
###.##.####
##..##..###
#...##...##
...#..#....
#..#..#..##
#...##...##
#.#....#.#.
#..####..#.
##.#..#####

.###..#.####.##.#
.#.#.##.##.######
####.#.##........
#..#.#.##....##..
#..#.#.##....##..
####.#.##........
.#.#.##.##.######
.###..#.####.##.#
.#.#..#.##.#....#
...###.#...#.####
##..#####.##....#
.#.##.#..#.######
.#.#.####..#....#
....##.##.#.####.
.##.##..##.#....#
....#.#.#.###..##
..##.###.....##..

......#
.#....#
#..#.#.
#..#.#.
.#....#
......#
#.###.#

####...##
.....####
..#..#..#
##.#.##.#
#.....#..
##.####..
..#....#.
#####..##
##.##....
##...##.#
##.#.#...
##.#.#...
##...##.#

#.#.#..
#.#.#..
###..##
..##.#.
##.#...
.##..#.
###..#.
###..#.
.##..#.
#..#...
..##.#.

..#.#.##.#.#.
..###.##.###.
..####..####.
..#...##...#.
##.#..##..#.#
##..........#
###.#.##.#.##
..##########.
##..........#
#.##.####.##.
######..#####
..##.####.##.
##..#.##.#..#
#####.##.####
...#..##..#..

#.#....#.#.....
.#.#....#.#.###
##.####.##.####
....##....##.##
.#..##..#..#...
###....####.#..
....##.....##..
#.#.##.#.##..##
##..##..##.##..
...#..#....##..
##......###..##

.#..###..#..###
.#..###..#..###
#.####..##.#..#
###...##.#.#.#.
.##....####....
..#......##.##.
#.####..#.#....
#...##..##..#.#
...###...#...##
.#..##.#...#...
.####.#..#..##.
.####.#..#..##.
.#..##.#...#...
...###...#...##
#...##.###..#.#

######.#..#..####
##.#...###.......
#..#####.#...##.#
#..#####.#...##.#
##.#...###.......
######.#..#..####
#...#..###...#.#.
.###.####..#.#.#.
##.#.#...##.###..
...#...####...#.#
...#...####...#.#
##.#.#...##.###..
.###.####..#.#.#.
#...#..###...#.#.
######.#..#..##.#

.#....#...##.
.##..#.#..#.#
#.##..#.##...
##.###.#.##..
##.###.#.##..
#.##..#.##...
.##..#.#..#.#
.#....#...##.
..##..###....
..###...#..#.
#...##..###..
.#..##.##.##.
.##.##.#...##
.#...#..#....
.#...#..#....
.##.##.#..###
.#..##.##.##.

##......#
...####..
..#....#.
..#.##.#.
..#.##.#.
..##..##.
##......#
##......#
..#.##.#.
#........
##.####.#
..#....#.
##.####.#

....####...##
###..#.##..##
###....##..##
....####...##
#..#.#..##.##
.#.#.#...#.##
##.#..#......
..#.##.###...
#...#.#####.#
....##..#....
###...###.###
###...###.###
....##..#....
#...#.#####.#
..#.##.###...

.#.##...#.#..##
...####.###.#..
######.###..#..
....#...#.#..#.
....#...#.#..#.
######.###..#..
...####.###.#..
.#.##...#.#..##
..#.#.###......
#.#.#.##.#.###.
##....####..###
..##..#..####..
.....###..#.#.#
##.###.###....#
#.#.#.#.#..#...
#...#.#.#..#...
##.###.###....#

..##..#.#...#..##
####.####..#####.
####.####..#####.
.###..#.#...#..##
#....##.##.###..#
....#.###.#...#..
#.##.#....###..##
.#......###..#...
.####.#.#.#######
##.#.#.###.#..#..
#..#.###..#.###.#
##.......##...#..
##.......##...#..
#..#.###..#.###.#
##.#.#.###.#..#..

.#.#####.........
.##.#.#.#..####..
#..#.#..####..###
###.##.#....##...
###...######..###
####.##.####..###
.#.##.#.#.######.
..####.##########
..####.##########
.#.##.#.#.######.
####.##.####..###
###...######..###
.##.##.#....##...
#..#.#..####..###
.##.#.#.#..####..

#.#.##.#.###..##.
..##..##..#..####
#.##..##.#.###..#
##.####.##...####
###....###..##..#
...#..#...#..####
#.#.##.#.###..##.
.##.##.##.#..#..#
##..##..###..#..#
#..#..#..##..#..#
..######...###..#
##..##..####.#..#
#..#..#..####.##.
##########.##....
##..##..###.#..#.

#....#...#...
.####.#......
##..###.#..#.
#....###.##.#
..##....#..#.
..##..##.##.#
.####..##..##
......#......
.#..#..######

###..###...#.
..##..##.##..
##.#.##..####
##.##..#####.
#.##...#.#.#.
..##...##..#.
...##..##.#..
##.#.##..###.
##...#....##.
##...#....##.
##.#.##..###.

#....#.##
#.##.#..#
##..##.#.
.#..#....
.#..#..#.
##..###..
##..###..
.#..#..#.
.#..#....
##..##.#.
#.##.#..#
#....#..#
##..#####
.####...#
######.#.

.###..###...##.##
#..#..#..#....#..
#.#.##.#.#.###.#.
.#.#..#.#.#...###
#...##...#...#..#
###.##.###....###
...#..#...#..####
##.####.##...#.#.
...#..#...#######
..........#.###.#
.###..###.#.#.#.#
.#..##..#..###.#.
#...##...#....#.#
###.##.####.#####
###.##.####.#.###

.......##.#..
.#.##.#..#.##
#####..###.#.
##...###.##.#
....###.#....
.....###.##.#
...####..#...
..#.#...#...#
###..#.##.#.#
###..#.##.#.#
..#.#...#...#

...##..
.#..##.
##...##
####..#
#...#.#
.....#.
..#.##.
####.##
####.##
..#.##.
...#.#.
#...#.#
####..#
##...##
.#..##.
...##..
...##..

.##.#..####..
##........###
.#..#..#..#..
#.#.####.#.##
..##.##.##...
.##.#..#.##..
.#.#.##.#.#..

####..#####
....##.....
...####....
##.########
###.##.####
.########..
..#....#...
..##..##...
###....####
...#..#....
..#.##.#...
....##.....
#..####..##

#..#..##..#....
...#.##..#..###
..#####...#..##
..#####...#..##
...#.##..#..###
#..#..##..#....
##.#..#........
###..#.######..
##.#.#.##...##.
##..##..#.###..
#..##....#.....
.#..##..##.#.##
.#.##..#..##...

.##.##....#
##.##.#...#
.###.#..#..
###.#.#####
##.#.#.#..#
#.#######..
#..#..#..##
#.#..####.#
#.#..####.#
#..#..#..##
#########..
##.#.#.#..#
###.#.#####
.###.#..#..
##.##.#...#
.##.##....#
.##.##....#

#.#..####
###...###
#....#.##
##.######
#.##.#.##
.####.###
...###...
.#.#..#..
##.#..###
##.######
##..#####

...#.....
...#..#..
######...
##.#.#.##
###..#...
.#.##.#..
##.......
.#.#.####
#..##.###
.###.....
#..######

.#..##...
#...####.
.#.#.####
....#..##
....#..##
.#.#.####
#...####.
.#..##...
..###....
##.#..##.
.#####..#
##.....##
.##....##
.##....##
##.....#.

####.#.##
.##.#....
#####..##
.....#...
.##....##
#..#.#.##
####..#..
#..#.##..
.##.####.

...#.#.##...##...
##....#.#.######.
##.#.#....#.##.#.
###..##.#.##..##.
###.....#########
..##.#.#...####..
.#.#.......####..
###.#.#.#...##...
##.########....##

###.##.#.
.#.###...
######.#.
.#.#...##
.#.#....#
######.#.
.#.###...
###.##.#.
###.#..##
..######.
#.##...##
..####.##
.#.....#.
.#.....#.
..####.##
#.##...##
..######.

.#.##.#........
#####.#...##...
##.#.####.##.##
#####.#.#....#.
#.####...#..#..
..#.#####.##.##
##.#.#...#..#..
.#.#.##..#..#..
.###....#.##.#.
#..#.##.##..##.
#.#.##...#..#..
###...#..#..#..
###...#..#..#..
#.#.##...#..#..
#..#.##.##..##.
.###....#.##.#.
...#.##..#..#..

###.....#
#.#.#.##.
#.##.##.#
...######
...######
#.##.####
#.#.#.##.
###.....#
#.##.##..
#.##.##..
###.....#
#.#.#.##.
#.##.####

...#....#...#..
.####...###.#.#
####....######.
#...####...##.#
##.######.###..
#.#.####.#.##.#
...##..##...##.
..#.####.#....#
####.##.####..#
..............#
.###....###.#.#
#.###..###.##..
#.###..###.##..
.###....###.#.#
..............#

#...#.####.#.#.
.#.##..##..##.#
#....######....
#.###..##..###.
##.#.#....#.#.#
..#.##.##.##.#.
..#.##.##.##.#.
##.#.#....#.#.#
#.###..##..###.
#....######....
.#.##..##..##.#

###....
...####
##.....
#...##.
#..####
###....
..#####

......##.#.##.#.#
..#####.##....##.
##.#..#.#.####.#.
..##.####..##..##
####..#.#..##..#.
##.#...#........#
..##...#...##...#
####...#.#.##.#.#
###...##..#..#..#
###.#####..##..##
....###.##....##.
....#..##.#..#..#
..#.##..#......#.
...#.#.....##....
..#...###..##..##

###.#########.#
...######..#.#.
...######..#.#.
###.#########.#
..#.....###.###
.##.###.#..#...
....#.#...#.#.#
#####.#...##.#.
#.##.##.##.####
#.##.##.#..####
#####.#...##.#.

####.#.##.#
##.#.##..##
##.#.##..##
###..#.##.#
..####.##.#
##.#...##..
#.#.#######
#......##..
.#...#.##.#
.#.##.#..#.
.#....####.
##...##..##
.#..###..##

##......##.##
#####..##.###
..#..###.####
####.....####
####..###...#
##.#.#...#...
#####.##...##
..###.#####..
##.##.....###

.###..##..#
.###..##..#
...##...##.
..##.#.####
##.#.##.#..
.##...#..##
##.#.#.###.
##..##..##.
##.....##..
.##...#..#.
..##.######
..#.##.....
..#.##.....
..##.######
.###..#..#.

#.####.#..##..#..
##....##..#####..
#..##..##....##..
.#.##.#..#....###
###..######..#...
##.##.###.##..#..
..#..#....#...###
.##..##.##.#.####
.##..##..##.###..
.#....#.#..#.##..
#..##..#####.#...
#..##..###.#####.
.#....#.####.##..
...##...#.#...#..
.######.####.#...

##....##.#.##
#..###.#.##..
.##.......##.
.##...#.#.###
.#.....#.##..
.###...#..##.
.###...#..##.
.#.....#.##..
.##...#.#.###
.##.......##.
#..###.#.##..
##....##.#.##
##....##.#.##
#..#.#.#.##..
.##.......##.

##..##...##.#..#.
##..##...##.#..#.
#.##.###.#.##..#.
#....########.##.
........#.###.###
.####..####.#.#..
#....##.#...#..##
##..###..#..#..##
#.##.#..###.#....
######.#..##.#.##
#.....####..##..#
..##..##...#.##..
##..###...#..##..
######.######.##.
#....######...##.

.#..#.#
####...
..###.#
..###.#
.###...
.#..#.#
#.#####
..##..#
#.....#
#.#..##
#.#.###
.#.#.#.
..#.###
.....##
#......
###...#
###...#

.#######.
########.
###..###.
#......##
###..###.
..#..#..#
.#....#.#
#.####.##
#.####.##
.#....#.#
..#..#..#
###..###.
#......##
###..###.
########.
.#######.
##....##.

.#..####.
.#..####.
.####.#.#
..###.##.
...####.#
###.....#
.#.###.##
.....##..
.....##..
.#.###.##
###.....#
#..####.#
..###.##.

....#.#
....#.#
.###.#.
.##...#
..##...
#.#..##
#####.#
#####.#
#.#..##
..##...
.##...#
.###...
....#.#

#......##..#..#..
.###.##.##.#..#.#
#......#.#..##..#
#.#..#.#..######.
........##.####.#
##....##.##.##.##
#.#..#.#.#..##..#
#.#..#.###..##..#
###..####.######.
..####..#.#....#.
#.#..#.####.##.##
###..######....##
.#.##.#.##.#..#.#
.#....#..#..##..#
#.####.##.#....#.

#.#...####.#.####
#.#...##.#.#.####
.###.#.####..####
..#.#.#...##.#...
###...######.##..
#....##.#...#...#
#.#...#..#..##...
#..#.....###..#..
#.#..#..##.#.#..#
...#..##......###
##....########.##
###.#...#.....###
.#####..##..#..##
.#####..##..#..##
###.#...#.....###
##....########.##
...#..##......###

#..####..##
.#.####.#..
.#..##..#..
#........##
#..####..##
.###.####..
##.#..#.###
.##.##.##..
..##..##...
#.##..##.##
#..#..#..##
#.##..##.##
.#......#..
#..####..##
###.##.####
..######...
.##....##..

.#..##.
.######
.#.####
.######
.#.....
.#.####
#.#####
..##..#
..#....
.##.##.
....##.
....##.
.##.##.
..#....
#.##..#

...####.###
#..#...#...
###.###.#.#
###.###.#.#
#..#...#...
...#.##.###
...#.##.###
#..#...#...
###.###.#.#

......####..#..##
......####..#..##
#.##..##..#..#...
.####..#....#.#.#
..##.#..#..###..#
####...#.#.....#.
#.#.#..###..#....
##.#.####...###.#
.####.#...###.#.#
.##...#.#..###.##
..##..##.##..#.##
#.##.#.#.#....#..
##.#.####....##..
##.#.####....###.
#.##.#.#.#....#..

#.#..#.#...#..#..
.....##..###.##.#
##...###.##......
#.##..#..##.##.##
....####.####....
####.#.#.##..#...
##.##.#..##.###..
###.#.#.##...#...
.#....#.#.###....
#..###.##........
........#...#####
........#...#####
#..###.##........
.#....#.#.###....
###.#.#.##...#...

#..##..####
.#.#...####
#.#..##.##.
#..###.#..#
#.....#####
#.#....#..#
##..#.#.##.
.#..#.#.##.
#.#....#..#
#.....#####
#..###.#..#
#.#..##.##.
.#.#...####

.###..###
##.####.#
.#......#
.#......#
##.####.#
.###..###
..#.####.
###.##.##
..######.

####..#...##.
.##.##.######
#..##..#.#..#
...##..#.#..#
.##.##.######
####..#...##.
.##.#.#.#.##.
...#.#.##.##.
#.#....#..##.
....##.#.....
.#.###..#####
.#..####..##.
..###...##..#
...##.####..#
##..####..##.
..##.##..#..#
.#....#...##.

#.##.###.####
#.#.##.###.##
###.#####.#..
#.#....#.#.##
..##.....#.##
##..###...###
#..#..#...#..
#..#..#...#..
.#..###...###

#.#####
.#.....
.#.#..#
.#..##.
.##....
..#....
.#..##.

..##.##.#####
####....##.##
..##.#.....#.
..###..##.#.#
#....##...###
...####...###
...#.##...###
#....##...###
..###..##.#.#
..##.#.....#.
####....##.##
..##.##.#####
..##.##.#####

##.####
.#..###
.#..###
##.####
#..##..
..#.##.
.##.###
#...#..
#..####
###.#..
##...##
##..#..
#..##..

.####..#####..#
#..#....#..####
#..######..#..#
#####..########
...#....#...##.
##..####..##..#
#...#..#...#..#

.##..##.###...##.
.##..##.###...##.
......##.###.#..#
....##...#...#..#
...#.....##.#..#.
#####.#.......#.#
.##.#.#.#...##.#.

.#...##
#..####
#.#.##.
...###.
.##..##
#####..
..#....
..#....
#####..
.##..##
...###.
#.#.##.
...####
.#...##
.#...##

#.##..##.#####..#
.#......#.#.##...
.#......#.#.##...
#.##..##.######.#
.##.##.##.#...#.#
####..####.#####.
...........#.##..
###....####..#.##
.#......#.###..#.
##......##..#####
#.######.#....##.
.##....##...#..#.
#.##..##.#...#...

####.#.#.##.#
####...######
....#........
#..#.#.#....#
#..#....####.
#..#.####..##
#..#.#..#..#.
#######..##..
#..#..##....#
######.##..##
.##..#..#....
####...##..##
.##..#.#....#'''

valleys = [x.splitlines() for x in input.split("\n\n")]

def checkRows(valley):
    mirror = 0
    for i, a in enumerate(valley):
        length = i if i < len(valley)/2 else len(valley) - i
        start = 0 if i < len(valley)/2 else 2*i - len(valley)
        #print(valley[start:i], valley[i:i+length])
        if valley[start:i] == (valley[i:i+length])[::-1]:
            #print(valley[start:i], valley[i:i+length])
            mirror = i
    if mirror != 0:
        return mirror

def checkColumns(valley):
    columnValley = []
    for i in range(len(valley[0])):
        columnValley += [''.join([x[i] for x in valley])]
    mirror = 0
    for i, a in enumerate(columnValley):
        length = i if i < len(columnValley)/2 else len(columnValley) - i
        start = 0 if i < len(columnValley)/2 else 2*i - len(columnValley)
        #print(valley[start:i], valley[i:i+length])
        if columnValley[start:i] == (columnValley[i:i+length])[::-1]:
            #print(valley[start:i], valley[i:i+length])
            mirror = i
    if mirror != 0:
        return mirror

# answer = 0
# for i, a in enumerate(valleys):
#     rows = checkRows(a)
#     columns = checkColumns(a)
#     if rows:
#         answer += 100*rows
#     elif columns:
#         answer += columns
#     else:
#         print(f'nothing found for valley {i+1}')

# print(answer)

##part 2 

def replaceDotWithhash(v, coord):
    smudgeAdded = []
    for i, a in enumerate(v):
        if i == coord[0]:
            toAdd = '#' if a[coord[1]] == '.' else '.'
            smudgeAdded += [a[:coord[1]] + toAdd + a[coord[1]+1:]]
        else:
            smudgeAdded += [a]
    return smudgeAdded



def checkRowsWithSmudge(valley, mirrorToIgnore):
    mirror = 0
    dots = []
    for j, b in enumerate(valley):
        for k, c in enumerate(b):
            dots += [[j,k]]
    for dot in dots:
        smudged = replaceDotWithhash(valley, dot)      
        #print(smudged) 
        for i, a in enumerate(smudged):
            length = i if i < len(smudged)/2 else len(smudged) - i
            start = 0 if i < len(smudged)/2 else 2*i - len(smudged)
            #if dot == [9,9]:
                #print(dot, i, smudged[start:i], (smudged[i:i+length])[::-1])
            if smudged[start:i] == (smudged[i:i+length])[::-1]:
                if i != mirrorToIgnore:
                    mirror = i
                #print(mirror)
        if mirror != 0 and mirror != mirrorToIgnore:
            break
    if mirror != 0 and mirror != mirrorToIgnore:
        return mirror


def checkColumnsWithSmudge(valley, mirrorToIgnore):
    columnValley = []
    for i in range(len(valley[0])):
        columnValley += [''.join([x[i] for x in valley])]
    mirror = 0
    dots = []
    for j, b in enumerate(columnValley):
        for k, c in enumerate(b):
            dots += [[j,k]]
    for dot in dots:
        smudged = replaceDotWithhash(columnValley, dot)      
        #print(dot, columnValley, smudged, columnValley == smudged) 
        for i, a in enumerate(smudged):
            length = i if i < len(smudged)/2 else len(smudged) - i
            start = 0 if i < len(smudged)/2 else 2*i - len(smudged)
            #print(smudged[start:i], (smudged[i:i+length])[::-1])
            if smudged[start:i] == (smudged[i:i+length])[::-1]:
                if i != mirrorToIgnore:
                    mirror = i
                #print(mirror)
        if mirror != 0 and mirror != mirrorToIgnore:
            break
    if mirror != 0 and mirror != mirrorToIgnore:
        return mirror

    
answer = 0
for i, a in enumerate(valleys):
    rows = checkRows(a)
    columns = checkColumns(a)
    #print('rowsSmudge')
    rowsWithSmudge = checkRowsWithSmudge(a, rows)
    #print('   ')
    colsWithSmudge = checkColumnsWithSmudge(a, columns)
    #print(rows, columns, rowsWithSmudge, colsWithSmudge)
    if rowsWithSmudge:
        answer += 100*rowsWithSmudge
    elif colsWithSmudge:
        answer += colsWithSmudge
    else:
        print(f'nothing found for valley {i+1}, was originally {"rows" if rows else "columns"} {rows if rows else columns}')

print(answer)